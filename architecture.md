
---

## 2. CI/CD Workflow

- При коммите в `main` GitHub Actions запускает `deploy.yml`
- Скрипт через `appleboy/ssh-action` подключается к серверу
- Используется `tmux`, чтобы деплой выполнялся асинхронно
- Контейнеры пересобираются (`docker-compose up -d --build`)
- Redis проверяется через `PING`
- Бот проверяется через HTTP-запрос на `/health` (порт `3001`)
- Результат отправляется в Telegram (со статусами контейнеров и эмодзи)

---

## 3. Инфраструктура

- **Docker Compose** управляет запуском Redis и Vapor
- **Redis ACL** ограничивает доступ к данным
- **Environment variables** (.env) передаются на этапе билда
- **Prometheus / Grafana** можно будет подключить как отдельные контейнеры

---

## 4. Безопасность

- Все секреты хранятся в `GitHub Secrets`
- Пароль Redis и токен Telegram не коммитятся в репозиторий
- Контейнеры изолированы в одной внутренней сети Docker

---

## 5. Планы на развитие

- Подключение **Prometheus Exporter** для метрик Redis и Vapor
- Визуализация данных в **Grafana**
- Добавление **Helm Chart** для Kubernetes
- Настройка **Alertmanager** для уведомлений в Telegram
- Автоматизация деплоя через **ArgoCD**
